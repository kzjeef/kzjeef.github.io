<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Thinking beyond source code</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Thinking beyond source code">
<meta property="og:url" content="http://www.thinksrc.com/page/6/index.html">
<meta property="og:site_name" content="Thinking beyond source code">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Thinking beyond source code">
  
    <link rel="alternate" href="/atom.xml" title="Thinking beyond source code" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Thinking beyond source code</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Recording my throughs</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.thinksrc.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-google_tw" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/04/05/google_tw.html" class="article-date">
  <time datetime="2010-04-05T11:07:01.000Z" itemprop="datePublished">2010-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/04/05/google_tw.html">Chromium设置默认的搜索引擎为google.com.tw</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近google.cn &amp; google.com 经常被墙，搞得看着看着就被重置了，使用起来很是麻烦。 我是使用chrome/界面的搜索直接搜索的。</p>
<p>但是发现google.com.tw并没有被封，也不会出现重置的问题，所以可以把默认浏览器的搜索引擎换成google.com.tw来解决被重置的问题。</p>
<p>下面是chrom的设置：</p>
<p>选项-&gt;搜索引擎管理-&gt;添加-&gt; 名称就写gogoleTW 关键字： www.google.com.tw 网址：&nbsp;http://www.google.com.tw/search?{google:RLZ}{google:acceptedSuggestion}{google:originalQueryForSuggestion}sourceid=chrome&amp;ie={inputEncoding}&amp;q=%s &nbsp;然后点添加。 最好再设置成默认搜索引擎就可以了。</p>
<p>因为firefox下面的搜索引擎必须是插件形式的， 所以暂时没有好的办法把默认搜索引擎转到google.com.tw下面，有时间也许自己可以写一个。&nbsp;</p>
<p>Firefox下的插件已经写好了： <a href="https://addons.mozilla.org/en-US/firefox/addon/125955/" target="_blank">点这里</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/04/05/google_tw.html" data-id="cj4nt09j3003dusa6yfradhfz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GFW/">GFW</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mobile-pos" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/21/mobile-pos.html" class="article-date">
  <time datetime="2010-03-21T09:12:32.000Z" itemprop="datePublished">2010-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/21/mobile-pos.html">移动的京东的刷卡体验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>说移动改变生活，说的太多了也就和一般的广告词没什么区别了，可是今天真的体验到什么叫做移动改变生活了。</p>
<p>引子是从前几天我的Thinkpad的喇叭坏了，几天听着耳机下来，感觉耳朵要坏掉了，很不舒服，于是想要去买个音箱来听听，感觉自己的小屋放不下什么大的低音炮，也不好带，所以就买了一个漫步者M11，可以放在笔记本书包里也只占很小的位置。 很爽。</p>
<p>于是就来到新蛋和京东两家选了选，由于以前在新蛋上买东西都没怎么开心过，于是就选择京东了，￥105。星期日晚上9店下单，选择的物流是货到付款。今天（星期一）上午8点半的时候，就听到有人按门铃，京东送货的已经在楼下了。睡梦中我抓起我的钱包，靠，昨天花的只剩60多了，这下不好了。&nbsp;</p>
<p>忽然想起记得京东在选择付款方式的时候还有POS刷卡，也许可以刷卡吧。好吧。下去试一下吧。</p>
<p>到了楼下，问京东的大叔说，可以刷卡吧。于是那个大叔就掏出来一个POS机，值得注意的是，这个POS机是移动（Mobile，不是中国移动那个移动）的。这样我在楼下，就刷卡拿东西上来放着贝多芬来煲音箱了。</p>
<p>传统的POS机是需要连线的，就像固定电话一样所以不能移动。所以京东这次拿的这个POS机是移动的，其实你也可以把它看成专门用来刷卡的手机，数据传输我想用一个EDGE的Modem就足够了。说起来好像又没什么了（当我夸赞京东大叔的POS机的时候，大叔很自豪的说，别看这个东西阿，一个要好几千呢，可不，肯定会比手机贵），如果是网上付款就可以避免这样了，可是两种支付方式购物体验是完全不一样的，毕竟我还是更喜欢一手交钱一手拿货的感觉吧。我想这是京东赞的地方，我看好你哦。把移动和电子商务结合确实很方便，很powerful。</p>
<p>该上班了，贴图吧：</p>
<p><a href="http://thinksrc.com/media/agdrempibG9ncg0LEgVNZWRpYRjq_gIM/%E5%9B%BE%E5%83%8F0195.jpg" target="_blank" rel="external"></a><img src="/assets/&#22270;&#20687;0195.jpg" width="300" height="400"></p>
<p>一个音箱，一个套子，质地很好，音质的话，煲完了才知道。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/21/mobile-pos.html" data-id="cj4nt09j00037usa6h4k6puom" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/电子商务/">电子商务</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-lcd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/19/lcd.html" class="article-date">
  <time datetime="2010-03-19T00:51:21.000Z" itemprop="datePublished">2010-03-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/19/lcd.html">竖起的显示器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>秀一下今天我的杰作。</p>
<p><img src="/assets/%E5%9B%BE%E5%83%8F0190.jpg?a=download" align="middle" width="450" height="600"></p>
<p>这是开着emacs的样子,分屏下来上下看的很爽。</p>
<p><img src="/assets/%E5%9B%BE%E5%83%8F0189.jpg?a=download" align="middle" width="450" height="600"></p>
<p>这是开着gmail的样子。操作系统是ubuntu 9.10</p>
<p>把显示器竖起来有几个好处：</p>
<p>1, 在编辑器里面可以看到的代码行数是横着的2倍左右<br>2. 看电子书也可以不用翻页<br>3. 很不低调</p>
<p>不过也有几个不好的地方：</p>
<p>1. 液晶显示器是有纹路的，而最佳的纹路是横着放置正前方看， 不然会有一定的虚的出现，所以在竖起来以后就好像有一些重影。 有点费眼睛。所以整个质量好的显示器才好啊。</p>
<p>2. 支架， 不像是有些高级液晶显示器，我们公司的显示器比较低端，没有能够旋转的支架，所以我就是把显示器放在底座上的，并不牢固，但是一个专门的支架好像卖的挺贵的。</p>
<p>3. 不够低调。回头率太高。有位大哥看见我这样说， “我靠，你就不能低调点啊"。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/19/lcd.html" data-id="cj4nt09j2003ausa6ndcu24xm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-%e5%9c%a8ubuntu%e4%b8%ad%e6%b7%bb%e5%8a%a0debian%e7%9a%84%e6%ba%90%e5%b9%b6%e5%ae%89%e8%a3%85xtables-addons" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/15/%e5%9c%a8ubuntu%e4%b8%ad%e6%b7%bb%e5%8a%a0debian%e7%9a%84%e6%ba%90%e5%b9%b6%e5%ae%89%e8%a3%85xtables-addons.html" class="article-date">
  <time datetime="2010-03-15T13:54:05.000Z" itemprop="datePublished">2010-03-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/15/%e5%9c%a8ubuntu%e4%b8%ad%e6%b7%bb%e5%8a%a0debian%e7%9a%84%e6%ba%90%e5%b9%b6%e5%ae%89%e8%a3%85xtables-addons.html">在ubuntu中添加debian的源并安装xtables-addons</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>也许你想在ubuntu中安装xtables-addons来编译某个爱情故事。那么这里给出一个具体步骤。</p>
<p>我实验的是使用ubuntu 9.04</p>
<p>1. 找到一个debian源。<br> 我用的是http://debian.ustc.edu.cn/debian 如果是用其他的源，可以下面的PUBKEY和地址要替换掉。</p>
<p>2. 系统 -&gt; 系统设置 -&gt; 软件源</p>
<p>在第三方软件中加入 deb http://debian.cn99.com/debian&nbsp; unstable main</p>
<p>这时候Update有可能会提示<br> NO_PUBKEY 9AA38DCD55BE302B</p>
<p>如果提示就使用下面的命令把公钥导入，否则可以忽略这两条命令。</p>
<p>gpg --keyserver pgpkeys.mit.edu --recv-key F1D53D8C4F368D5D</p>
<p>gpg -a --export&nbsp; F1D53D8C4F368D5D | sudo apt-key add -</p>
<p>3. update</p>
<p>sudo apt-get update<br> &nbsp;<br> 4. install<br> sudo apt-get install xtables-addons-common</p>
<p>如果你是为了编译某个爱情故事需要的xtable来的话， 可以再</p>
<p>sudo apt-get install --reinstall iptables-dev</p>
<p>就可以继续编译那个爱情故事了。</p>
<p>BTW，不过建议在可以编译以后，最好从源里面把debian的库去掉，再update一下，因为有可能版本差距太大，会造成apt一些依赖关系的破坏。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/15/%e5%9c%a8ubuntu%e4%b8%ad%e6%b7%bb%e5%8a%a0debian%e7%9a%84%e6%ba%90%e5%b9%b6%e5%ae%89%e8%a3%85xtables-addons.html" data-id="cj4nt09iz0033usa6mrc7v2mv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GFW/">GFW</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-audio-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/15/android-audio-2.html" class="article-date">
  <time datetime="2010-03-14T18:19:38.000Z" itemprop="datePublished">2010-03-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/15/android-audio-2.html">Android Audio System(2): ALSA Layer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <div>
<div><strong>* Hardware Layer: Alsa</strong></div>
<div>Author : Zhang Jiejing (<a href="http://thinksrc.com" target="_blank" rel="external">http://thinksrc.com</a>)<br>Data: 2010-3-15</div>
<div>ALSA hardware layer is becoming a standard part of Android master tree.</div>
<div>the Android ALSA layer library Code base:</div>
<div><a href="http://android.git.kernel.org/?p=platform/hardware/alsa_sound.git;a=summary" target="_blank" rel="external">http://android.git.kernel.org/?p=platform/hardware/alsa_sound.git;a=summary</a></div>
<div>The major development job is by WindRiver.</div>
<div>This paper is a continue part of the past post<a href="http://kzjblog.appspot.com/2010/03/6/Android-Audio-System-(1).html" target="_blank"> Audio audio system(1)</a>, if you haven't read it , I strongly suggest you read it first.</div>
<p><strong>** Roles</strong></p>
<p><strong>*** &nbsp;AudioSystem - Audio Abstract Layer</strong></p>
<div>code: frameworks/base/media/libmedia/AudioSystem.*</div>
<div><strong><br></strong></div>
<div><strong>*** AudioPlicyManager - Platform specific policy manager</strong></div>
<div>Alsa: AudioPolicyManagerALSA.* :&nbsp;This Manager can be implement in OSS or ALSA.</div>
<div><strong>*** AudioStream[In|Out]Alsa</strong></div>
<div>This class is controled by AudioPolicyManager, charge the read and audio mix&nbsp;job. using alsa pcm interface.</div>
<div><strong>*** Alsa device handler: reference code: alsa_default.cpp</strong></div>
<div>This part is compiled as a separated shared library, alsa_default.cpp just acts as a &nbsp;fall back.(This is just like other libhardware modules, the libhardware frist search the [ModuleName].[ro.hardware prop].so &nbsp;such as alsa.dream.so and ro.product.board, ro.board.platform, ro.arch is continue search, if can't find any of these libraries, it's will fall back to search [ModuleNmae].default.so, such as alsa.default.so)</div>
<div><strong>** Communation betweens Roles:</strong></div>
<div><strong><span style="font-weight: normal;">AudioSystem has a AudioPolicyServer Client, it will PRC to AudioPlicyManager class, in this case, the class is &nbsp;AudioPolicyManagerALSA.</span></strong></div>
<div><strong><span style="font-weight: normal;">AudioStream[In|Out] will use hardware lib via dlopen() the ALSA handler library. And the call the open/close directly.</span></strong></div>
<div><strong><br>** Control follow:</strong></div>
<p><strong>*** Media Server side.</strong></p>
<div>&nbsp;&nbsp; When recording, the AudioSystem will call AudioSystem::getInput first, this call will deliver to AudioPolicyManagerALSA::getInput();&nbsp;&nbsp; AudioPolicyManagerALSA::getInput() will check channel, input format, sampleRate, and call the mpClientInterface openInput's interface(AudioPolicyManagerALSA.cpp:1014), this call will back into audio_flinger 's openInput(AudioPolicyServer.cpp:504),</div>
<p><strong>*** Back to AudioFlinger &nbsp;&nbsp;</strong></p>
<div>&nbsp;&nbsp; In AudioFlinger::openInput,This function will wil call AudioHardware's openInputStream(), this will drop into AudioHardwareALSA class(audioHardwareALSA.cpp:229), this fucntion will call the hardware list and call the open function of this device, this will into the hardware shared library(such as alsa_default.cpp) 's open function.</div>
<p><strong>*** Into hardware handler library</strong></p>
<div>In the open() it will call snd_pcm_open, this is a ALSA user library function, this function will do some check device, and apply the config (such as hooks in asound.conf) belows to this device. Also it's will do some params setting such as set Hardware params, and software params.After open() returns, the the AudioHardwareALSA will new a AUdioStreamInALSA class, by the handler open() returns, &nbsp;and acoustics.</div>
</div>
<div>
<p><strong>*** Leave hardware handler library</strong></p>
<p><strong><span style="font-weight: normal;">In AudioStreamInALSA, it will init the ASLAStreamOps class by the alsa hardware hander( for example, alsa_default).Also will create a acousitic device in same time.After that, AudioHardwareALSA will call a stream's set(), this will be in the ALSAStreamOPS::set() function.This function will see the channel config in hardware handler, and format and sample rate, and perpare for the parameter AudioHardwareALSA need.These paramenter will finnally return to audioFlinger, audioFlinger will check whether these valuse are same to what he want, if the value is not same and not by error, the audioFlinger will call openInputStream again by these paramenters.</span></strong></p>
<div>&nbsp;&nbsp; If the the input is open success, the a RecordThread will be created, and put it into the record thread pool.And then, the record precess will same to other non-ALSA sound hardware.This is how the ALSA connect to AudioSystem and how ALSA connect to ALSA hardware handler.</div>
</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/15/android-audio-2.html" data-id="cj4nt09ix0031usa69sxgy9hj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-emacs%e4%b8%87%e8%83%bd-%e7%b3%bb%e5%88%97%e4%b9%8btab%e8%bd%ac%e7%a9%ba%e6%a0%bc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/10/emacs%e4%b8%87%e8%83%bd-%e7%b3%bb%e5%88%97%e4%b9%8btab%e8%bd%ac%e7%a9%ba%e6%a0%bc.html" class="article-date">
  <time datetime="2010-03-10T02:17:52.000Z" itemprop="datePublished">2010-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/10/emacs%e4%b8%87%e8%83%bd-%e7%b3%bb%e5%88%97%e4%b9%8btab%e8%bd%ac%e7%a9%ba%e6%a0%bc.html">Emacs万能 系列之TAB转空格</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近在参与一个开源项目， <a href="http://code.google.com/p/iptux" target="_blank" rel="external"><span style="color:#000000;">iptux</span></a>&nbsp;，为了统一风格我们要把代码里面所有的tab都转换成空格，大约有70个C++源文件两万行代码那么多。&nbsp;</p>
<p>我的第一个想法是去找indent工具来作这件事清，可是当我实验了几下以后发现不对，indent会作很多其他的风格的修改，做了太多事情了，不行。</p>
<p>怎么办呢，上emacs，想不到该怎么办的时候我总是想到emacs，合并代码，去找BUG...不胜枚举.</p>
<p>我是这么作的，大约用了2分钟作了这个工作两次（因为第一次做完以后提交的时候遇到冲突，所以就revert &amp; up了以后重新来了一次）。</p>
<p>1. 首先，现用C-f 打开所有的.cpp和.h文件</p>
<p>2. 按F3开始录制宏,</p>
<p>3. 然后开始一次转一个文件</p>
<p>C－SPC &nbsp; # 设定开始标记</p>
<p>M－S－&gt; # 到达文件末尾</p>
<p>M-x untabify ENT &nbsp;# 输入转换成空格的命令并回车</p>
<p>C-x C-s # 保存文件</p>
<p>C-k ENT #关掉当前buffer</p>
<p>4. 按F4表示录制完毕.</p>
<p></p>
<p>然后就狂按F4执行刚才录制的宏, 直到没有窗口为止.因为我们之前已经把所有需要转换的文件都打开了,所以关到没有窗口的时候就是全部转换完了。</p>
<p>OK， 转换完了。提交代码了。</p>
<p>顺便推销一下iptux，如果你在局域网环境中，你需要一个Linux下面兼容飞鸽传书类的软件的话，就选择它吧。&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/10/emacs%e4%b8%87%e8%83%bd-%e7%b3%bb%e5%88%97%e4%b9%8btab%e8%bd%ac%e7%a9%ba%e6%a0%bc.html" data-id="cj4nt09iw002zusa611u6fgcf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/emacs/">emacs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-%e8%bf%81%e7%a7%bb%e5%88%b0gae%e4%b8%8a%e9%9d%a2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/10/%e8%bf%81%e7%a7%bb%e5%88%b0gae%e4%b8%8a%e9%9d%a2.html" class="article-date">
  <time datetime="2010-03-09T21:25:06.000Z" itemprop="datePublished">2010-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/10/%e8%bf%81%e7%a7%bb%e5%88%b0gae%e4%b8%8a%e9%9d%a2.html">迁移到GAE上面</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于众所周知的原因，原来BLOGGER的博客还是不能访问，于是在折腾了半天之后， 还是选择在GAE上发布了新的博客，导入的时候遇到一点问题， 是我的archive太大了， 编辑去掉以后就可以导入了。</p>
<p>以后就在这个上面多写写东西了。</p>
<p>使用的是micolog， 感谢http://xuming.net。</p>
<p>新域名将会在48小时内启用，这样就可以使用<a href="http://thinksrc.com" target="_blank" rel="external">thinksrc.com</a>来访问了。</p>
<p>终于弄好了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/10/%e8%bf%81%e7%a7%bb%e5%88%b0gae%e4%b8%8a%e9%9d%a2.html" data-id="cj4nt09is002wusa65u7i9e14" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GAE/">GAE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android%e7%9a%84%e5%9f%9f%e5%90%8d%e8%a7%a3%e6%9e%90" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/07/android%e7%9a%84%e5%9f%9f%e5%90%8d%e8%a7%a3%e6%9e%90.html" class="article-date">
  <time datetime="2010-03-07T07:11:00.000Z" itemprop="datePublished">2010-03-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/07/android%e7%9a%84%e5%9f%9f%e5%90%8d%e8%a7%a3%e6%9e%90.html">android的域名解析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>android 中的域名解析库， 一般来说叫（libresolve）是netbsd中抓取出来的，在应用程序的层次上， 调用gethostbyname， 而gethostbyname中就是调用了resolve库里面的东西， <br>里面主要用一个 _res的全局变量， </p>
<p>struct __res_state _res;</p>
<p>由res_send, res_init来改变这个值。 在netbsd的原来实现中， 是通过查看/etc/resolve.conf来得到这个DNS服务器的。</p>
<p>然后通过给这些dns服务器发UDP包来获取这个域名的地址。 </p>
<p>后来这个库的发现上做了一些感动， 通过 </p>
<p>struct __res_state *res_state(void);<br>#define _res (*(res_state()) </p>
<p>来把这个全局变量替换成一个函数， 通过这个函数来返回这个变量， 这样可以做到线程安全。 </p>
<p>android主要做了以下修改</p>
<p>他没有用_res把这个变量转换成函数res_get_state()， 这个函数会去监视一个prop(属性）：net.changed， 这个prop的值是最后改变了值的dns服务器的地址，如果这个值改变了， 他就会去重新刷新一下他的dns服务器的缓存， 而且，android没有使用/etc/resolve.conf， 而是去动态的获取一个叫做 net.dnsN 的prop， （N是DNS服务器地址的序号）， 通过这个来取得dns服务器的地址。</p>
<p>这就是为什么很多做android一直的人在gprs.ppp拨通了以后可以Ping到ip， 却不能解析域名的原因。 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/07/android%e7%9a%84%e5%9f%9f%e5%90%8d%e8%a7%a3%e6%9e%90.html" data-id="cj4nt09ir002uusa6y9gvxwlp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-%e9%87%8d%e6%96%b0%e5%bc%80%e4%b8%9a" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2010/03/06/%e9%87%8d%e6%96%b0%e5%bc%80%e4%b8%9a.html" class="article-date">
  <time datetime="2010-03-06T03:52:00.000Z" itemprop="datePublished">2010-03-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2010/03/06/%e9%87%8d%e6%96%b0%e5%bc%80%e4%b8%9a.html">重新开业</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天是一个特殊的日子，收到了亲爱的寄的川味香肠，开通了她和我的顶极域名，还去第一次玩了卡丁车。
<div>所以决定今天把以前的老地盘重新开张，开始坚持写文章。</div>
<div>域名商是选择的 name.com， 要感谢云风的那篇<a href="http://blog.codingnow.com/2010/02/move.html" target="_blank" rel="external">文章</a>。</div>
<div></div>
</p>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2010/03/06/%e9%87%8d%e6%96%b0%e5%bc%80%e4%b8%9a.html" data-id="cj4nt09iq002susa65zijfrev" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-about-file-system-logging" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2009/11/29/about-file-system-logging.html" class="article-date">
  <time datetime="2009-11-29T10:00:00.000Z" itemprop="datePublished">2009-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2009/11/29/about-file-system-logging.html">About File system logging</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a note @MIT OCW 6.824 Lecture 7:</p>
<p>The main point of a log is make complex operations atomic.</p>
<p>I.e. operations that involve many individule writes. You want all writes or none, even if a crash in the middle.</p>
<p>A "transaction" is multi-write operation that should be atomic. The logging system needs to know which set of write from a transication.</p>
<p>Re-do with checkpoint:</p>
<p>Most logs work like this, e.g. FSD,<br>allows much faster recovery: ca use on-disk data<br>write-ahead rule:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p>delay flushing dirty block from in-memory data cache until corresponding commit recore is on disk</p>
</blockquote>
<p style="MARGIN-RIGHT: 0px" dir="ltr">Check point rules:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p style="MARGIN-RIGHT: 0px" dir="ltr">all data writes before check point must be stable on disk checkpoint may not advance beyond first uncommitted Begin</p>
</blockquote>
<p style="MARGIN-RIGHT: 0px" dir="ltr">Recovery:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p style="MARGIN-RIGHT: 0px" dir="ltr">for each block mentioned in the log<br>find the last xaction that wrote that block<br>if committed: re-do<br>if not committed: un-do</p>
</blockquote>
<p style="MARGIN-RIGHT: 0px" dir="ltr">Why is logging fast:</p>
<blockquote style="MARGIN-RIGHT: 0px" dir="ltr"><p style="MARGIN-RIGHT: 0px" dir="ltr">group commit -- batched log writes.<br>could delay flushing log -- may lost committed transactions but at least you have a prefix.</p>
<p style="MARGIN-RIGHT: 0px" dir="ltr">Single seek to implement a transaction.<br>maybe less if no intervening disk activity, or group commit</p>
<p style="MARGIN-RIGHT: 0px" dir="ltr">Write-behind of data allows batched/schedules.<br>one data block may reflect many transactions, i.e. create many files in a directory.<br>don't have to be so careful since the log is the real infomation.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.thinksrc.com/2009/11/29/about-file-system-logging.html" data-id="cj4nt09io002ousa6xy2tj4lj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CPU/">CPU</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CPU/未分类/">未分类</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Emacs/">Emacs</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Emacs/Throughs/">Throughs</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Performance/">Performance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rails/">Rails</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Rails/未分类/">未分类</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/GAE/">GAE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GFW/">GFW</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Postgres/">Postgres</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rails/">Rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adb/">adb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apple/">apple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arm/">arm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bluetooth/">bluetooth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/emacs/">emacs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/homebrew/">homebrew</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/internet/">internet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kindle/">kindle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-优化/">linux 优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pm/">pm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uart/">uart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/性格/">性格</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电子商务/">电子商务</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/GAE/" style="font-size: 10px;">GAE</a> <a href="/tags/GFW/" style="font-size: 15px;">GFW</a> <a href="/tags/Postgres/" style="font-size: 10px;">Postgres</a> <a href="/tags/Rails/" style="font-size: 10px;">Rails</a> <a href="/tags/adb/" style="font-size: 10px;">adb</a> <a href="/tags/android/" style="font-size: 17.5px;">android</a> <a href="/tags/apple/" style="font-size: 10px;">apple</a> <a href="/tags/arm/" style="font-size: 10px;">arm</a> <a href="/tags/bluetooth/" style="font-size: 12.5px;">bluetooth</a> <a href="/tags/emacs/" style="font-size: 12.5px;">emacs</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/homebrew/" style="font-size: 10px;">homebrew</a> <a href="/tags/internet/" style="font-size: 10px;">internet</a> <a href="/tags/kindle/" style="font-size: 10px;">kindle</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/linux-优化/" style="font-size: 10px;">linux 优化</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/pm/" style="font-size: 10px;">pm</a> <a href="/tags/uart/" style="font-size: 10px;">uart</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/性格/" style="font-size: 10px;">性格</a> <a href="/tags/电子商务/" style="font-size: 10px;">电子商务</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">June 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11/">November 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">September 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04/">April 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/11/">November 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07/">July 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/03/">March 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/02/">February 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/01/">January 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12/">December 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/11/">November 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/10/">October 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/09/">September 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/08/">August 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/07/">July 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/06/">June 2007</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/05/26/about-java-native-programmingjni-local-reference.html">About Java Native Programming(JNI) Local Reference</a>
          </li>
        
          <li>
            <a href="/2016/03/18/write-async-test-case-by-gtest-gmock-for-c.html">Write Async Test Case by gtest &amp; gmock for C++</a>
          </li>
        
          <li>
            <a href="/2015/12/06/understanding-the-stack-frame.html">Understanding the function call and recursion ...</a>
          </li>
        
          <li>
            <a href="/2015/10/04/art-of-padding.html">Art of padding</a>
          </li>
        
          <li>
            <a href="/2015/09/30/%e6%8e%a8%e8%8d%90%e4%b8%80%e4%b8%aa%e7%94%bbuml%e5%88%a9%e5%99%a8-plantuml.html">推荐一个画UML利器 - PlantUML</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Jiejing Zhang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>